Index: Main/views.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import django\nfrom django.contrib.auth.views import LoginView\nfrom django.http import JsonResponse, HttpResponseRedirect, HttpResponseNotFound\nfrom django.shortcuts import render\nfrom django.views import View\nfrom django_email_verification import send_email\n\nfrom .forms import UserRegistrationForm, ServiceForm\nfrom .models import AbbreviatedLink, Transition\n\n\nclass CustomRegView(View):\n    @staticmethod\n    def post(request, *args, **kwargs):\n        form = UserRegistrationForm(request.POST)\n        if form.is_valid():\n            user = form.save(commit=False)\n            user.set_password(form.cleaned_data['password'])\n            user = form.save()\n            send_email(user)\n            context = {\n                'replaceMessage': 'Подтверждение регистрации отправлено на почту '\n                                  f'{form.cleaned_data[\"email\"]}',\n                'title': 'DaLinci.com - Регистрация'\n            }\n            return render(request, 'authentication/go_mail.html', context)\n        else:\n            context = {\n                'center_text': 'Регистрация',\n                'title': 'DaLinci.com - Регистрация',\n                'button_text': 'Продолжить',\n                'form': form\n            }\n            return render(request, 'authentication/login.html', context)\n\n    @staticmethod\n    def get(request, *args, **kwargs):\n        context = {\n            'center_text': 'Регистрация',\n            'title': 'DaLinci.com - Регистрация',\n            'button_text': 'Продолжить',\n            'form': UserRegistrationForm()\n        }\n        return render(request, 'authentication/login.html', context)\n\n\nclass CustomLoginView(LoginView):\n    template_name = 'authentication/login.html'\n    redirect_authenticated_user = True\n    extra_context = {\n        'center_text': 'Вход в личный кабинет',\n        'button_text': 'Войти',\n        'title': 'DaLinci.com - Вход в личный кабинет'\n    }\n\n\nclass ServiceView(View):\n    @staticmethod\n    def get(request, *args, **kwargs):\n        context = {\n            'title': 'DaLinci.com',\n            'form': ServiceForm()\n        }\n        return render(request, 'service/service.html', context)\n\n\ndef get_hash_link(request, *args, **kwargs):\n    form = ServiceForm(request.POST)\n    if form.is_valid():\n        try:\n            if not request.user.is_authenticated and AbbreviatedLink.objects.filter(parent_link=form.cleaned_data['parent_link'], owner__isnull=True).exists():\n                print('1')\n                abbrlink = AbbreviatedLink.objects.get(parent_link=form.cleaned_data['parent_link'], owner__isnull=True)\n                context = {\n                    'title': 'DaLinci.com',\n                    'abbrlink': f'localhost:8000/r/{abbrlink.urlhash}',\n                }\n            elif not request.user.is_authenticated:\n                print('2')\n                abbrlink = form.save()\n                context = {\n                    'title': 'DaLinci.com',\n                    'abbrlink': f'localhost:8000/r/{abbrlink.urlhash}',\n                }\n            else:\n                print('3')\n                abbrlink = form.save(commit=False)\n                abbrlink.owner = request.user\n                abbrlink = form.save()\n                context = {\n                    'title': 'DaLinci.com',\n                    'abbrlink': f'localhost:8000/r/{abbrlink.urlhash}',\n                }\n            return JsonResponse(context)\n        except django.db.utils.IntegrityError:\n            context = {\n                'error': 'You already have the same link!',\n            }\n            return JsonResponse(context)\n    else:\n        context = {\n            'error': 'Form invalid!',\n        }\n        return JsonResponse(context)\n\n\ndef get_client_ip(request):\n    x_forwarded_for = request.META.get('HTTP_X_FORWARDED_FOR')\n    if x_forwarded_for:\n        ip = x_forwarded_for.split(',')[0]\n    else:\n        ip = request.META.get('REMOTE_ADDR')\n    return ip\n\n\ndef link_redirect(request, urlhash):\n    try:\n        redirect_obj = AbbreviatedLink.objects.get(urlhash=urlhash)\n        redirect_obj.counter += 1\n        redirect_obj.save()\n        transition = Transition(ip=get_client_ip(request), abbr_link=redirect_obj)\n        transition.save()\n        return HttpResponseRedirect(redirect_obj.parent_link)\n    except AbbreviatedLink.DoesNotExist:\n        return HttpResponseNotFound(\"404\")\n\n\ndef test(request):\n    return render(request, 'service/service.html')\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Main/views.py b/Main/views.py
--- a/Main/views.py	(revision 65f451dd82421d73414c867e4f935c531441daa3)
+++ b/Main/views.py	(date 1636401876198)
@@ -1,7 +1,7 @@
 import django
 from django.contrib.auth.views import LoginView
 from django.http import JsonResponse, HttpResponseRedirect, HttpResponseNotFound
-from django.shortcuts import render
+from django.shortcuts import render, redirect
 from django.views import View
 from django_email_verification import send_email
 
@@ -35,6 +35,8 @@
 
     @staticmethod
     def get(request, *args, **kwargs):
+        if request.user.is_authenticated:
+            return redirect('service')
         context = {
             'center_text': 'Регистрация',
             'title': 'DaLinci.com - Регистрация',
Index: templates/service/control-base.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{% load static %}\n{% load crispy_forms_filters %}\n{% load crispy_forms_tags %}\n\n<head>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <link rel=\"stylesheet\"\n          href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\"\n          integrity=\"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\"\n          crossorigin=\"anonymous\">\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/1.3.5/tailwind.min.css\">\n    <script src=\"{% static 'js/changebtn.js' %}\"></script>\n    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js\"></script>\n    <script>\n        let is_authenticated = \"{{ request.user.is_authenticated }}\";\n    </script>\n    <title>{{ title }}</title>\n    {% block meta %}\n    {% endblock %}\n</head>\n\n<body class=\"flex w-screen h-screen space-x-6 bg-gray-300\" style=\"padding: 10px;\">\n\n\t<div class=\"flex flex-col items-center h-full overflow-hidden text-gray-700 bg-gray-100 rounded\" style=\"width: 200px;\">\n\t\t<a class=\"flex items-center w-full px-3 mt-3\" href=\"#\">\n\t\t\t<svg class=\"w-8 h-8 fill-current\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n\t\t\t\t<path d=\"M11 17a1 1 0 001.447.894l4-2A1 1 0 0017 15V9.236a1 1 0 00-1.447-.894l-4 2a1 1 0 00-.553.894V17zM15.211 6.276a1 1 0 000-1.788l-4.764-2.382a1 1 0 00-.894 0L4.789 4.488a1 1 0 000 1.788l4.764 2.382a1 1 0 00.894 0l4.764-2.382zM4.447 8.342A1 1 0 003 9.236V15a1 1 0 00.553.894l4 2A1 1 0 009 17v-5.764a1 1 0 00-.553-.894l-4-2z\"/>\n\t\t\t</svg>\n\t\t\t<span class=\"ml-2 text-sm font-bold\">DaLinci.com</span>\n\t\t</a>\n\t\t<div class=\"w-full px-2\" id=\"buttons_list\">\n\t\t\t<div class=\"flex flex-col items-center w-full mt-3 border-t border-gray-300\">\n\t\t\t\t<a class=\"flex items-center w-full h-12 px-3 mt-2 rounded hover:bg-gray-300\" href=\"#\">\n\t\t\t\t\t<img class=\"w-6 h-6 stroke-current\" src=\"{% static 'icons/home.png' %}\" alt=\"links\">\n\t\t\t\t\t<span class=\"ml-2 text-sm font-medium\">Главная</span>\n\t\t\t\t</a>\n\t\t\t\t<a class=\"flex items-center w-full h-12 px-3 mt-2 hover:bg-gray-300 rounded\" href=\"#\">\n\t\t\t\t\t<img class=\"w-6 h-6 stroke-current\" src=\"{% static 'icons/statistics.png' %}\" alt=\"links\">\n\t\t\t\t\t<span class=\"ml-2 text-sm font-medium\">Статистика</span>\n\t\t\t\t</a>\n\t\t\t\t<a class=\"flex items-center w-full h-12 px-3 mt-2 rounded hover:bg-gray-300\" href=\"#\">\n\t\t\t\t\t<img class=\"w-6 h-6 stroke-current\" src=\"{% static 'icons/link_svg.svg' %}\" alt=\"links\">\n\t\t\t\t\t<span class=\"ml-2 text-sm font-medium\">Ссылки</span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t\t<div class=\"flex flex-col items-center w-full mt-2 border-t border-gray-300\">\n\t\t\t\t<a class=\"flex items-center w-full h-12 px-3 mt-2 rounded hover:bg-gray-300\" href=\"#\">\n\t\t\t\t\t<img class=\"w-6 h-6 stroke-current\" src=\"{% static 'icons/settings.png' %}\" alt=\"links\">\n\t\t\t\t\t<span class=\"ml-2 text-sm font-medium\">Настройки</span>\n\t\t\t\t</a>\n\t\t\t\t<a class=\"relative flex items-center w-full h-12 px-3 mt-2 rounded hover:bg-gray-300\" href=\"#\">\n\t\t\t\t\t<img class=\"w-6 h-6 stroke-current\" src=\"{% static 'icons/message.png' %}\" alt=\"links\">\n\t\t\t\t\t<span class=\"ml-2 text-sm font-medium\">Сообщения</span>\n\t\t\t\t\t<span class=\"absolute top-0 left-0 w-2 h-2 mt-2 ml-2 bg-indigo-500 rounded-full\"></span>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n        {% if user.is_authenticated %}\n        <a class=\"flex items-center justify-center w-full h-16 mt-auto bg-gray-200 hover:bg-gray-300\" href=\"#\">\n\t\t\t<svg class=\"w-6 h-6 stroke-current\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n\t\t\t\t<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n\t\t\t</svg>\n\t\t\t<div class=\"ml-2 text-sm font-medium\" style=\"text-overflow: ellipsis; max-width: 80px; overflow: hidden;\">{{ user.email }}</div>\n\t\t</a>\n        {% else %}\n\t\t<a class=\"flex items-center justify-center w-full h-16 mt-auto bg-gray-200 hover:bg-gray-300\" href=\"{% url 'login' %}\">\n\t\t\t<img class=\"w-6 h-6 stroke-current\" src=\"{% static 'icons/user.png' %}\" alt=\"links\">\n\t\t\t<span class=\"ml-2 text-sm font-medium\">Войти</span>\n\t\t</a>\n        {% endif %}\n\t</div>\n    <div class=\"flex flex-col items-center w-full h-full overflow-hidden rounded\">\n        {% block enterblock %}\n        {% endblock %}\n    </div>\n</body>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/templates/service/control-base.html b/templates/service/control-base.html
--- a/templates/service/control-base.html	(revision 65f451dd82421d73414c867e4f935c531441daa3)
+++ b/templates/service/control-base.html	(date 1636388538029)
@@ -22,7 +22,7 @@
 <body class="flex w-screen h-screen space-x-6 bg-gray-300" style="padding: 10px;">
 
 	<div class="flex flex-col items-center h-full overflow-hidden text-gray-700 bg-gray-100 rounded" style="width: 200px;">
-		<a class="flex items-center w-full px-3 mt-3" href="#">
+		<a class="flex items-center w-full px-3 mt-3" href="{% url 'service' %}">
 			<svg class="w-8 h-8 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
 				<path d="M11 17a1 1 0 001.447.894l4-2A1 1 0 0017 15V9.236a1 1 0 00-1.447-.894l-4 2a1 1 0 00-.553.894V17zM15.211 6.276a1 1 0 000-1.788l-4.764-2.382a1 1 0 00-.894 0L4.789 4.488a1 1 0 000 1.788l4.764 2.382a1 1 0 00.894 0l4.764-2.382zM4.447 8.342A1 1 0 003 9.236V15a1 1 0 00.553.894l4 2A1 1 0 009 17v-5.764a1 1 0 00-.553-.894l-4-2z"/>
 			</svg>
@@ -30,7 +30,7 @@
 		</a>
 		<div class="w-full px-2" id="buttons_list">
 			<div class="flex flex-col items-center w-full mt-3 border-t border-gray-300">
-				<a class="flex items-center w-full h-12 px-3 mt-2 rounded hover:bg-gray-300" href="#">
+				<a class="flex items-center w-full h-12 px-3 mt-2 rounded hover:bg-gray-300" href="{% url 'service' %}">
 					<img class="w-6 h-6 stroke-current" src="{% static 'icons/home.png' %}" alt="links">
 					<span class="ml-2 text-sm font-medium">Главная</span>
 				</a>
